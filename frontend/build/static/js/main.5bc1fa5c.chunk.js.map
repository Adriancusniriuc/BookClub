{"version":3,"sources":["lib/authorization.js","components/common/SecureRoute.js","components/common/Home.js","components/clubs/ClubMapComp.js","components/clubs/ClubIndex.js","components/books/CurrentBookCard.js","components/books/PreviousBookCard.js","components/clubs/ClubShow.js","components/clubs/ClubForm.js","lib/headers.js","components/clubs/ClubCreate.js","components/clubs/ClubEdit.js","components/common/ImageUpload.js","components/books/BookForm.js","components/books/BookEdit.js","components/books/BookCreate.js","components/books/BookShow.js","components/members/MemberCard.js","components/members/MemberIndex.js","components/auth/Login.js","components/auth/FormErrors.js","components/auth/Register.js","components/common/Nav.js","App.js","serviceWorker.js","index.js"],"names":["Authorization","token","localStorage","setItem","getItem","removeItem","this","getToken","parts","split","length","JSON","parse","atob","payload","getPayload","Math","round","Date","now","exp","SecureRoute","Component","component","rest","isAuthenticated","logout","to","Home","className","alt","src","ClubMapComp","viewport","handleGeocoderViewportChange","handleViewportChange","mapboxToken","mapRef","postcodes","clubs","mapboxApiAccessToken","ref","height","width","mapStyle","onViewportChange","map","postcode","index","key","latitude","result","longitude","club","i","query","id","ClubIndex","state","zoom","process","React","createRef","setState","transitionDuration","axios","get","res","data","console","log","getPostcodes","post","type","CurrentBookCard","image","name","PreviousBookCard","title","ClubShow","currentBook","previousBooks","handleDelete","a","clubId","props","match","params","delete","headers","history","push","isClubOwner","sub","user","book","slice","pop","venue","date","description","onClick","previousBook","ClubForm","handleChange","handleSubmit","onSubmit","onChange","placeholder","value","required","maxspace","common","Cookies","ClubCreate","target","e","preventDefault","ClubEdit","put","ImageUpload","handleUpload","files","FormData","append","url","fieldName","BookForm","author","genre","no_pages","rating","labelText","BookEdit","bookId","BookCreate","books","getData","addToClub","pkArr","member","memb","bookPkArr","bk","sendData","pk","owner","response","BookShow","text","handleSubmitComment","handleDeleteComment","commentId","comments","comment","withRouter","MemberCard","username","MemberIndex","members","handleClick","userId","membersArr","currentUser","filter","indexOf","some","splice","Login","password","error","FormErrors","formErrors","Object","keys","Register","email","password_confirmation","bio","emaiValid","formValid","passwordValid","validateField","fieldValidationErrors","emailValid","validateForm","rows","cols","disabled","Nav","App","exact","path","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.5bc1fa5c.chunk.js","sourcesContent":["class Authorization {\n  static setToken(token) {\n    localStorage.setItem('token', token)\n  }\n  static getToken() {\n    return localStorage.getItem('token')\n  }\n  static logout() {\n    localStorage.removeItem('token')\n  }\n  static getPayload() {\n    const token = this.getToken()\n    if (!token) return false\n    const parts = token.split('.')\n    if (parts.length < 3) return false\n    return JSON.parse(atob(parts[1]))\n  }\n  static isAuthenticated() {\n    const payload = this.getPayload()\n    if (!payload) return false\n    const now = Math.round(Date.now() / 1000)\n    return now < payload.exp\n  }\n}\n\nexport default Authorization","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport Authorization from '../../lib/authorization'\n\nconst SecureRoute = ({ component: Component, ...rest }) => {\n  if (Authorization.isAuthenticated()) return <Route {...rest} component={Component} />\n  Authorization.logout()\n  return <Redirect to=\"/login\" />\n}\n\nexport default SecureRoute","import React from 'react'\n\nconst Home = () => (\n  \n    <section className=\"home\">\n      {/* <h1>BookClub</h1>\n      <p>Find a book club and join!</p> */}\n      <img alt=\"home\" src=\"https://www.werksgroup.org.uk/wp-content/uploads/2018/09/Book-Club.jpg\"/>\n    </section>\n)\n\n\nexport default Home","import React from 'react'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport 'react-map-gl-geocoder/dist/mapbox-gl-geocoder.css'\n\nimport MapGL, { Marker } from 'react-map-gl'\nimport Geocoder from 'react-map-gl-geocoder'\nimport { Link } from 'react-router-dom'\n\nconst ClubMapComp = ({\n    viewport,\n    handleGeocoderViewportChange,\n    handleViewportChange,\n    mapboxToken,\n    mapRef,\n    postcodes,\n    clubs\n  }) => (\n    <MapGL\n    mapboxApiAccessToken={mapboxToken}\n    ref={mapRef}\n    {...viewport}\n    height={'80vh'}\n    width={'80vw'}\n    mapStyle=\"mapbox://styles/mapbox/streets-v11\"\n    onViewportChange={handleViewportChange}\n  >\n    <Geocoder\n      mapRef={mapRef}\n      onViewportChange={handleGeocoderViewportChange}\n      mapboxApiAccessToken={mapboxToken}\n    />\n    {postcodes.map((postcode, index) => {\n      return (\n        <Marker\n          key={index}\n          latitude={postcode.result.latitude}\n          longitude={postcode.result.longitude}\n        >\n                \n            {clubs.map((club, i) => {\n              return club.postcode === postcode.query ? (\n                <Link key={i} to={`/clubs/${club.id}`}>\n                  <div>\n                    <img className=\"marker\" alt=\"bookclub-marker\" src='https://image.flaticon.com/icons/svg/29/29302.svg' />\n                  </div>\n                </Link>\n              ) : null\n            })}\n          \n        </Marker>\n      )\n    })}\n  </MapGL>\n\n\n  )\n\nexport default ClubMapComp\n\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport 'react-map-gl-geocoder/dist/mapbox-gl-geocoder.css'\n\n// import ClubCard from './ClubCard'\nimport ClubMapComp from './ClubMapComp'\n\nclass ClubIndex extends React.Component {\n  state = {\n    postcodes: null,\n    clubs: null,\n    viewport: {\n      latitude: 51.5074,\n      longitude: 0.1278,\n      zoom: 9\n    }\n  }\n\n  mapboxToken = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN\n\n  mapRef = React.createRef()\n  handleViewportChange = viewport => {\n    this.setState({\n      viewport: { ...this.state.viewport, ...viewport }\n    })\n  }\n\n    handleGeocoderViewportChange = viewport => {\n    const geocoderDefaultOverrides = { transitionDuration: 1000 }\n    this.setState({\n      viewport: {\n        latitude: viewport.latitude,\n        longitude: viewport.longitude,\n        zoom: viewport.zoom\n      }\n    })\n        return this.handleViewportChange({\n      ...viewport,\n      ...geocoderDefaultOverrides\n    })\n  }\n\n  async componentDidMount() {\n        try {\n          const res = await axios.get('/api/clubs/')\n          this.setState({ clubs: res.data })\n          console.log(res.data)\n          this.getPostcodes()\n        } catch (error) {\n          console.log(error)\n        }\n      }\n\n  async getPostcodes() {\n        const postcodes = this.state.clubs.map(club => {\n          return club.postcode\n        })\n        const res = await axios.post(\n          'https://cors-anywhere.herokuapp.com/api.postcodes.io/postcodes',\n          { postcodes }\n        )\n        // console.log(res.data.result)\n        this.setState({ postcodes: res.data.result })\n      }\n\n  render() {\n    if (!this.state.postcodes) return null\n    if (!this.state.clubs) return null\n    // console.log('clubs', this.state.clubs)\n    // console.log('postcodes', this.state.postcodes)\n    return(\n    <section>\n          <div className=\"index\">\n            <h1>Find a book club in your area!</h1>\n            {/* {Authorization.isAuthenticated() ? */}\n              <Link to=\"/clubs/create\">\n                <button\n                  className=\"button\"\n                  type=\"button\">Create club</button>\n              </Link> \n               {/* : null */}\n          </div>\n\n          <div className=\"map-container\">\n            <ClubMapComp\n              viewport={this.state.viewport}\n              handleGeocoderViewportChange={this.handleGeocoderViewportChange}\n              handleViewportChange={this.handleViewportChange}\n              mapboxToken={this.mapboxToken}\n              mapRef={this.mapRef}\n              postcodes={this.state.postcodes}\n              clubs={this.state.clubs}\n            />\n          </div>\n\n    </section>\n  )\n  }\n\n}\n\nexport default ClubIndex\n\n\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nconst CurrentBookCard = ({ image, id, name }) => (\n  <div className=\"current-book\">\n    <h2>Current Book:</h2>\n    <Link to={`/books/${id}`}>\n      <img className=\"current-book-pic\" alt={name} src={image}/>\n    </Link>\n  </div>\n)\n\nexport default CurrentBookCard","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nconst PreviousBookCard = ({ image, title, id, name }) => (\n  \n      <Link to={`/books/${id}`}>\n        {/* <h1>{title}</h1> */}\n        <img className=\"prev-book-pic\" alt={name} src={image}/>\n      </Link>\n)\n\nexport default PreviousBookCard","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport CurrentBookCard from '../books/CurrentBookCard'\nimport axios from 'axios'\nimport PreviousBookCard from '../books/PreviousBookCard'\nimport Authorization from '../../lib/authorization'\n\n\nclass ClubShow extends React.Component {\n  state = {\n    clubs: null,\n    currentBook: null,\n    previousBooks: null\n  }\n\n  async componentDidMount(){\n    const clubId = this.props.match.params.id\n    try{\n      const { data } = await axios.get(`/api/clubs/${clubId}/`)\n      this.setState({ clubs: data, currentBook: data.book.slice(-1).pop(), previousBooks: data.book.slice(0, -1) })\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  handleDelete = async () => {\n    const clubId = this.props.match.params.id\n    try {\n      await axios.delete(`/api/clubs/${clubId}`, {\n        headers: { Authorization: `Bearer ${Authorization.getToken()}` }\n      })\n      this.props.history.push('/clubs')\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  isClubOwner = () => {\n    return Authorization.getPayload().sub === this.state.clubs.user.id\n  }\n\n  render() {\n    console.log(this.state.currentBook)\n    console.log(this.state.previousBooks)\n    const clubs = this.state.clubs\n    const clubId = this.props.match.params.id\n    if (!this.state.previousBooks) return null\n    if (!this.state.clubs) return null\n    return(\n    <section>\n      \n      <main className=\"club-show\">\n      <div className=\"club-info\">\n      <h2>{clubs.name}</h2>\n      <div className=\"content\">\n      <p><b>We meet at:</b>  {clubs.venue}, {clubs.postcode}</p>\n      <p><b>When?</b>  {clubs.date}</p>\n      <p><b>A bit about us:</b>  {clubs.description}</p>\n      </div>\n\n      <div className=\"button-div\">\n      <Link to={`/clubs/${clubs.id}/members/`}>\n      <button >Members</button>\n      </Link>\n\n      {/* {Authorization.isAuthenticated() && this.isClubOwner() ? */}\n      <Link to={`/clubs/${clubId}/books/create/`}>\n      <button>Add Book</button>\n      </Link>\n\n      <Link to={`/clubs/${clubs.id}/edit/`}>\n      <button>Edit Club</button>\n      </Link>\n\n      <button\n      onClick={this.handleDelete}>\n        Delete Club</button>\n      {/* : null */}\n\n      </div>\n      </div>\n\n      {/* <div className=\"current-book\"> */}\n      <CurrentBookCard {...this.state.currentBook}/>\n      {/* </div> */}\n      </main>\n\n      \n      <h2>Previous Books:</h2>\n      <div className=\"prev-book\">\n      {this.state.previousBooks.map((previousBook, i ) => (\n        <PreviousBookCard key={i} {...previousBook}/>\n      ))}\n      </div>\n    </section>\n  )\n  }\n\n}\n\nexport default ClubShow","import React from 'react'\n\nconst ClubForm = ({ data, handleChange, handleSubmit }) => (\n    <section className=\"form\">\n      <h1>Club Form</h1>\n      <form onSubmit={handleSubmit}>\n      <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Name\"\n            name=\"name\" \n            value={data.name}\n            required/>\n        </div>\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Venue\"\n            name=\"venue\" \n            value={data.venue}\n            required/>\n        </div>\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Postcode\"\n            name=\"postcode\" \n            value={data.postcode}\n            required/>\n        </div>\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Date\"\n            name=\"date\" \n            value={data.date}\n            required/>\n        </div>\n\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Description\"\n            name=\"description\" \n            value={data.description}\n            />\n        </div>\n          <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Maximum available spaces\"\n            name=\"maxspace\" \n            value={data.maxspace}\n            required/>\n        </div>\n        \n        <div className=\"button-div\">\n          <button\n            className=\"button\"\n            type=\"submit\">\n              Submit</button>\n        </div>\n        </form>\n    </section> \n\n)\n\nexport default ClubForm","import Authorization from './authorization'\nimport Cookies from 'js-cookie'\nconst csrftoken = Cookies.get('csrftoken')\n\nexport const headers = {\n  common: {\n    'X-CSRF-TOKEN': csrftoken\n  },\n  // <!-- later on you can include this (remember to import it): -->\n  headers: { Authorization: `Bearer ${Authorization.getToken()}` }\n}\n\n\n\n","import React from 'react'\nimport axios from 'axios'\nimport ClubForm from './ClubForm'\nimport Authorization from '../../lib/authorization'\nimport { headers } from '../../lib/headers'\n\n\nclass ClubCreate extends React.Component {\n  state = {\n    data: {\n      name: '',\n      venue: '',\n      postcode: '',\n      date: '',\n      description: '',\n      maxspace: '',\n    }\n  }\n\n  handleChange = ({ target: { name, value } }) => {\n    const data = { ...this.state.data, [name]: value }\n    console.log(data)\n    this.setState({ data })\n  }\n\n  handleSubmit = async e => {\n    e.preventDefault()\n    try {\n      const res = await axios.post('/api/clubs/', this.state.data, headers, {\n        headers: { Authorization:  `Bearer ${Authorization.getToken()}` }\n      })\n      this.props.history.push(`/clubs/${res.data.id}`)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  render() {\n\n    return(\n    <section>\n      <h1>Club Create</h1>\n      <ClubForm\n      data={this.state.data}\n      handleChange={this.handleChange}\n      handleSubmit={this.handleSubmit}/>\n    </section>\n  )\n  }\n\n}\n\nexport default ClubCreate","import React from 'react'\nimport ClubForm from './ClubForm'\nimport Authorization from '../../lib/authorization'\nimport { headers } from '../../lib/headers'\nimport axios from 'axios'\n\nclass ClubEdit extends React.Component {\n  state = {\n    data: {\n      name: '',\n      venue: '',\n      postcode: '',\n      date: '',\n      description: '',\n      maxspace: '',\n    }\n  }\n\n  async componentDidMount() {\n    const clubId = this.props.match.params.id\n    try {\n      const res = await axios.get(`/api/clubs/${clubId}/`)\n      this.setState({ data: res.data })\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  handleChange = e => {\n    const data = { ...this.state.data, [e.target.name]: e.target.value }\n    this.setState({ data })\n  }\n\n  handleSubmit = async e => {\n    e.preventDefault()\n    const clubId = this.props.match.params.id\n    \n    try {\n      const { data } = await axios.put(`/api/clubs/${clubId}/`, this.state.data, headers, {\n        headers: { Authorization:  `Bearer ${Authorization.getToken()}` }\n      })\n      this.props.history.push(`/clubs/${data.id}`)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  render() {\n\n    return(\n    <section>\n      <h1> Club Edit </h1>\n      <ClubForm\n       data={this.state.data}\n       handleChange={this.handleChange}\n       handleSubmit={this.handleSubmit}/>\n    </section>\n  )\n  }\n\n}\n\nexport default ClubEdit","import React from 'react'\nimport axios from 'axios'\n\nexport default class ImageUpload extends React.Component {\n  state = {\n    image: null\n  }\n\n  handleUpload = async ({ target: { files } }) => {\n    const data = new FormData()\n    data.append('file', files[0])\n    data.append('upload_preset', 'px8nzwkd')\n    const res = await axios.post('https://api.cloudinary.com/v1_1/dhemsdusi/image/upload', data)\n    this.setState({ image: res.data.url }, () => {\n      this.props.handleChange({ target: { name: this.props.fieldName, value: res.data.url } })\n    })\n  }\n\n  render() {\n    const { image } = this.state\n    return (\n      <>\n      {image ?\n        <div>\n          <img alt=\"member\" src={image} />\n        </div>\n        :\n      <>\n      {/* <label>{this.props.labelText}</label> */}\n      <input type=\"file\"\n        onChange={this.handleUpload} />\n      </>\n      }\n  </>\n    )\n  }\n}","import React from 'react'\nimport ImageUpload from '../common/ImageUpload'\n\n\nconst BookForm = ({ data, handleChange, handleSubmit }) => (\n    <section className=\"form\">\n      <h1>Book Form</h1>\n      <form onSubmit={handleSubmit}>\n      <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"title\"\n            name=\"title\" \n            value={data.title}\n            required/>\n        </div>\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Author\"\n            name=\"author\" \n            value={data.author}\n            required/>\n        </div>\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Genre\"\n            name=\"genre\" \n            value={data.genre}\n            />\n        </div>\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Number of Pages\"\n            name=\"no_pages\" \n            value={data.no_pages}\n            />\n        </div>\n\n        <div className=\"form-div\">\n          <input\n            onChange={handleChange}\n            placeholder=\"Rating\"\n            name=\"rating\" \n            value={data.rating}\n            />\n        </div>\n          <div className=\"form-div\">\n          <label>* required field</label>\n          <ImageUpload\n            labelText=\"Upload Image\"\n            handleChange={handleChange}\n            fieldName=\"image\"\n            required/>\n        \n        </div>\n        <div className=\"button-div\">\n          <button\n            className=\"button\"\n            type=\"submit\">\n              Submit</button>\n        </div>\n        </form>\n    </section> \n\n)\n\nexport default BookForm","import React from 'react'\nimport axios from 'axios'\nimport BookForm from './BookForm'\nimport Authorization from '../../lib/authorization'\nimport { headers } from '../../lib/headers'\n\n\nclass BookEdit extends React.Component {\n  state = {\n    data: {\n      title: '',\n      author: '',\n      genre: '',\n      no_pages: '',\n      image: '',\n      rating: '',\n    }\n  }\n\n  async componentDidMount() {\n    const bookId = this.props.match.params.id\n    try {\n      const res = await axios.get(`/api/books/${bookId}`)\n      this.setState({ data: res.data })\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  handleChange = e => {\n    const data = { ...this.state.data, [e.target.name]: e.target.value }\n    this.setState({ data })\n  }\n\n  handleSubmit = async e => {\n    e.preventDefault()\n    const bookId = this.props.match.params.id\n    try {\n      const { data } = await axios.put(`/api/books/${bookId}/`, this.state.data, headers, {\n        headers: { Authorization:  `Bearer ${Authorization.getToken()}` }\n      })\n      this.props.history.push(`/books/${data.id}`)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  render() {\n\n    return(\n    <section>\n      <h1>Book Edit</h1>\n      <BookForm\n      data={this.state.data}\n      handleChange={this.handleChange}\n      handleSubmit={this.handleSubmit}/>\n    </section>\n  )\n  }\n\n}\n\nexport default BookEdit","import React from 'react'\nimport axios from 'axios'\nimport BookForm from './BookForm'\n// import Authorization from '../../lib/authorization'\nimport { headers } from '../../lib/headers'\n// import { withRouter } from 'react-router-dom'\n\n\nclass BookCreate extends React.Component {\n  state = {\n    books: [],\n    club: null,\n    data: {\n      title: '',\n      author: '',\n      genre: '',\n      no_pages: '',\n      image: '',\n      rating: ''\n    }\n  }\n\n  getData = async () => {\n    const clubId = this.props.match.params.id\n    try {\n      const res = await axios.get(`/api/clubs/${clubId}/`)\n      this.setState({ club: res.data })\n    } catch (error) {\n      console.log(error)\n    }\n    }\n  componentDidMount() {\n    this.getData()\n  }\n\n\n  handleChange = ({ target: { name, value } }) => {\n    const data = { ...this.state.data, [name]: value }\n    console.log(data)\n    this.setState({ data })\n  }\n \n  handleSubmit = async e => {\n    e.preventDefault()\n      \n    try {\n      const clubId = this.props.match.params.id\n      console.log(clubId)\n      // const data = { ...this.state.data, clubs:[clubId] }\n      const res = await axios.post(`/api/books/`, this.state.data, headers)\n      const bookId = res.data\n      console.log('bookid', bookId)\n      this.state.club.book.push(bookId)\n      console.log('book in data', this.state.club.book)\n      this.setState({ data: res.data })\n      // this.props.history.push(`/books/${res.data.id}`)\n\n      this.addToClub()\n      // this.props.history.goBack()\n      // console.log(this.state)\n\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  addToClub = async () => {\n\n    const clubId = this.props.match.params.id\n    const club = this.state.club\n\n    console.log(club)\n\n    const pkArr = []\n    club.member.map(memb => pkArr.push(memb.id))\n    const bookPkArr = []\n    club.book.map(bk => bookPkArr.push(bk.id))\n    \n\n    const sendData = {\n      name: club.name,\n      venue: club.venue,\n      postcode: club.postcode,\n      date: club.date,\n      description: club.description,\n      maxspace: club.maxspace,\n      member: pkArr.map(pk => pk),\n      book: bookPkArr.map(book => book),\n      owner: club.owner\n    }\n\n    console.log('data', sendData)\n\n    \n    \n    try {\n    await axios.put(`/api/clubs/${clubId}/`, sendData)\n  } catch (error) {\n    console.log(error.response.data)\n  }\n}\n\n  render() {\n    if (!this.state.club) return null\n    console.log(this.state.books)\n    console.log('bookArr in club', this.state.club.book)\n    // console.log(this.state.data)\n    // console.log('club id in state', this.state.clubId)\n    // if (!this.state.books) return null\n    return(\n    <section>\n      <h1>Book Create</h1>\n      <BookForm\n      data={this.state.data}\n      handleChange={this.handleChange}\n      handleSubmit={this.handleSubmit}/>\n      <button onClick={this.addToClub}>Click me</button>\n    </section>\n  )\n  }\n\n}\n\n// export default withRouter(BookCreate)\nexport default BookCreate","import React from 'react'\nimport axios from 'axios'\n// import { headers } from '../../lib/headers'\nimport { Link, withRouter } from 'react-router-dom'\nimport Authorization from '../../lib/authorization'\n\nclass BookShow extends React.Component {\n  state = {\n    books: null,\n    text: ''\n  }\n\n  getData = async () => {\n    const bookId = this.props.match.params.id\n    try {\n      const res = await axios.get(`/api/books/${bookId}`)\n      this.setState({ books: res.data})\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  componentDidMount() {\n    this.getData()\n  }\n\n  handleDelete = async () => {\n    const bookId = this.props.match.params.id\n    try {\n      await axios.delete(`/api/books/${bookId}/`, {\n        headers: { Authorization: `Bearer ${Authorization.getToken()}` }\n      })\n      this.props.history.push('/clubs')\n      // this.props.history.goBack()\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  handleChange = e => {\n    const text = e.target.value\n    this.setState({ text })\n    // console.log(text)\n  }\n\n  handleSubmitComment = async (e) => {\n    e.preventDefault()\n    const bookId = this.props.match.params.id\n    try {\n      await axios.post(`/api/books/${bookId}/comments/`, { text: this.state.text }, {\n        headers: { Authorization: `Bearer ${Authorization.getToken()}` }\n      })\n      this.setState({ text: '' })\n    } catch (err) {\n      console.log(err)\n    }\n    this.getData()\n  }\n\n  handleDeleteComment = async (e) => {\n    e.preventDefault()\n    const bookId = this.props.match.params.id\n    const commentId = e.target.name\n   \n    try {\n      await axios.delete(`/api/books/${bookId}/comments/${commentId}/`, {\n        headers: { Authorization: `Bearer ${Authorization.getToken()}` } \n      })\n      //HEADERS AND AUTHORIZATION AS ABOVE\n    } catch (error) {\n      console.log(error)\n    }\n    this.getData()\n  }\n\n  isClubOwner = () => {\n    return Authorization.getPayload().sub === this.state.clubs.user.id\n  }\n\n  render() {\n    if (!this.state.books) return null\n    const { text } = this.state\n    // const bookId = this.props.match.params.id\n    console.log('hello', this.state.books)\n    return(\n      <section>\n        <main className=\"bookshow\">\n        <div className=\"book\">\n    <img className=\"bookshow-img\" alt={this.state.books.title} src={this.state.books.image}/>\n    {/* <p>{this.state.books.comments.text}</p> */}\n   \n    {/* {Authorization.isAuthenticated() && this.isClubOwner() ? */}\n    <div>\n    <Link to={`/books/${this.state.books.id}/edit/`}>\n      <button>Edit Book</button>\n      </Link>\n\n    <button\n    onClick={this.handleDelete}>\n    Delete Book</button>\n    </div>\n    </div>\n\n    {/* : null } */}\n    <div className=\"comments\">\n    {this.state.books.comments.map((comment, i) => (\n        <div className=\"comment-del\">\n        <p key={i}>{comment.text}</p>\n        <button\n        onClick={this.handleDeleteComment}\n        name={comment.id}\n        type=\"submit\"\n        className=\"button\">\n        Delete comment</button>\n        </div>\n      ))}\n        <form className=\"review-form\" onSubmit={this.handleSubmitComment}>\n          <div>\n            <textarea\n              className=\"review-textarea\"\n              placeholder=\"Add a comment\"\n              onChange={this.handleChange}\n              value={text}\n            />\n          </div>       \n          <div>\n            <button className=\"button\" type=\"submit\">Add</button>\n          </div>  \n              \n        </form>\n        </div>\n        </main>\n      </section>\n    )\n  }\n}\n\n\nexport default withRouter(BookShow)","import React from 'react'\n\nconst MemberCard = ({ username, image })  => (\n      \n        <div className=\"member-card\">\n          <img className=\"member-pic\" alt=\"member\" src={image}/>\n          <p>{username}</p>\n        </div>\n\n)\n\nexport default MemberCard","import React from 'react'\nimport MemberCard from './MemberCard'\nimport axios from 'axios'\nimport Authorization from '../../lib/authorization'\nimport { headers } from  '../../lib/headers'\n\n\nclass MemberIndex extends React.Component {\nstate = {\n  clubs:{\n    name: '',\n    venue: '',\n    postcode: '',\n    date: '',\n    description: '',\n    maxspace: '',\n    member: [],\n    book: [],\n    owner: {}\n}\n}\n\n\ngetData = async () => {\n  const clubId = this.props.match.params.id\n  \n  try {\n    const res = await axios.get(`/api/clubs/${clubId}/`)\n    this.setState({ members: res.data.member, clubs: res.data })\n    // const memberId = this.state.members\n    // console.log('here', memberId)\n  } catch (error) {\n    console.log(error)\n  }\n  }\n\ncomponentDidMount() {\n  this.getData()\n}\n\n\nhandleClick = async e => {\n  e.preventDefault()\n  const userId = Authorization.getPayload().sub\n  const membersArr = this.state.members\n  try {\n    const user = await axios.get(`/api/user/`, headers)\n    const currentUser = membersArr.filter(member =>\n      member.id === userId)\n    const index = membersArr.indexOf(currentUser)\n    membersArr.some(member => member.id === userId) ? \n    membersArr.splice(index, 1) :\n    membersArr.push(user.data)\n    this.setState({  members: membersArr })\n    this.handleSubmit()\n  } catch (err) {\n    console.log(err)\n  } \n}\n\nhandleSubmit = async e => {\n  const clubId = this.props.match.params.id\n  const { clubs } = this.state\n  const pkArr = []\n  clubs.member.map(memb => pkArr.push(memb.id))\n\n  const bookPkArr = []\n  clubs.book.map(bk => bookPkArr.push(bk.id))\n  // console.log(clubs.member)\n  const sendData = {\n    name: clubs.name,\n    venue: clubs.venue,\n    postcode: clubs.postcode,\n    date: clubs.date,\n    description: clubs.description,\n    maxspace: clubs.maxspace,\n    member: pkArr.map(pk => pk),\n    book: bookPkArr.map(book => book),\n    owner: clubs.owner\n  }\n  try {\n    await axios.put(`/api/clubs/${clubId}/`, sendData, headers) \n  } catch (error) {\n    console.log(error.response.data)\n  }\n}\n\n  render() {\n    if (!this.state.members) return null\n    const userId = Authorization.getPayload().sub\n    return(\n    <section>\n      <h1>These are our members!</h1>\n      <div className=\"member-index\">\n      {this.state.members.map((member, i) => (\n        <MemberCard key={i} {...member}/>\n      ))}\n      </div>\n      {/* {Authorization.isAuthenticated() ? */}\n            <form className=\"buttons\">\n              {this.state.members.some(member => member.id === userId) ?\n                <button type=\"button\" className=\"button\" onClick={this.handleClick}>Leave Team</button> :\n                <button type=\"button\" className=\"button\" onClick={this.handleClick}>Join Team</button>}\n              {/* {this.isOwner() && <button type=\"button\" className=\"button\">Edit Club Atendees</button>} */}\n            </form>\n           {/* : null} */}\n      \n    </section>\n  )\n  }\n\n}\n\nexport default MemberIndex","import React from 'react'\nimport axios from 'axios'\n// import DjangoCSRFToken from 'django-react-csrftoken'\n// import Authorization from '../../lib/authorization'\nimport { headers } from '../../lib/headers'\n\n\nclass Login extends React.Component {\n  state = {\n    data: {\n      username: '',\n      password: ''\n    }\n  }\n\n  handleChange = ({ target: { name, value } }) => {\n    const data = { ...this.state.data, [name]: value }\n    this.setState({ data })\n  }\n\n  handleSubmit = async e => {\n    e.preventDefault()\n    try {\n      const res = await axios.post('/api/login', this.state.data, headers)\n      // Authorization.setToken(res.data.token)\n      console.log(res.data)\n      this.props.history.push('/')\n      \n    } catch (error) {\n      this.setState({ error: 'Invalid Credentials' })\n    }\n  }\n\n  render() {\n\n    return(\n    <section>\n      {/* <main className=\"login\"> */}\n      <h1>Login Here</h1>\n        <form onSubmit={this.handleSubmit}>\n          {/* <DjangoCSRFToken/> */}\n          <div className=\"form-div\">\n            <input\n              placeholder=\"username\"\n              name=\"username\"\n              onChange={this.handleChange} />\n          </div>\n          <div className=\"form-div\">\n            <input\n              type=\"password\"\n              placeholder=\"password\"\n              name=\"password\"\n              onChange={this.handleChange} />\n          </div>\n          <div className=\"button-div\">\n            <button\n              className=\"button\"\n              type=\"submit\">\n              Login</button>\n          </div>\n        </form>\n      {/* </main> */}\n      \n    </section>\n  )\n  }\n\n}\n\nexport default Login","import React from 'react'\n\nconst FormErrors = ({ formErrors }) => (\n  <div className=\"formErrors\">\n    {Object.keys(formErrors).map((fieldName, i) => {\n      if (formErrors[fieldName].length > 0) {\n        return (\n          <p key={i}>\n            {fieldName} {formErrors[fieldName]}\n          </p>\n        )\n      } else {\n        return ''\n      }\n    })}\n  </div>\n)\n\nexport default FormErrors","import React from 'react'\nimport axios from 'axios'\n\nimport ImageUpload from '../common/ImageUpload'\nimport FormErrors from './FormErrors'\n\nclass Register extends React.Component {\n  state = {\n    data: {\n      username: '',\n      email: '',\n      password: '',\n      password_confirmation: '',\n      bio: ''\n    }, \n    emaiValid: false,\n    formValid: false,\n    passwordValid: false,\n    formErrors: { email: '', password: '' }\n  }\n\n  handleChange = e => {\n    const name = e.target.name\n    const value = e.target.value \n    const data = { ...this.state.data, [name]: value } \n    this.setState({ data },\n      () => {\n        this.validateField(name, value)\n      } )\n  }\n\n\n\n  validateField(fieldName, value) {\n    let fieldValidationErrors = this.state.formErrors\n    let emailValid = this.state.emailValid\n    let passwordValid = this.state.passwordValid\n  \n    switch (fieldName) {\n      case 'email': \n        emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)\n        fieldValidationErrors.email = emailValid ? '' : ' is invalid'\n        break\n      case 'password':\n        passwordValid = value.length >= 1\n        fieldValidationErrors.password  = passwordValid ? '' : ' is too short'\n        break\n      default: \n        break\n    }\n    this.setState({\n      formErrors: fieldValidationErrors, \n      emailValid: emailValid,\n      passwordValid: passwordValid\n    }, this.validateForm)\n  }\n\n  validateForm() {\n    this.setState({ formValid: this.state.emailValid && this.state.passwordValid })\n  }\n  \n  errorClass(error) {\n    return (error.length === 0 ? '' : 'has-error')\n  }\n\n  handleSubmit = async e => {\n    e.preventDefault()\n    try {\n      await axios.post('/api/register', this.state.data)\n      this.props.history.push('/login')\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n\n  render() {\n\n    return(\n    \n    <section>\n      <main className=\"register\">\n      <h1>Register</h1>\n      <form onSubmit={this.handleSubmit}>\n        <div>\n          <FormErrors formErrors={this.state.formErrors} />\n        </div>\n\n        <div className=\"form-div\">\n          <input\n            onChange={this.handleChange}\n            placeholder=\"username\"\n            name=\"username\" \n            required/>\n        </div>\n\n        <div className=\"form-div\">\n          <input\n            onChange={this.handleChange}\n            type=\"email\"\n            placeholder=\"email\"\n            name=\"email\" \n            required/>\n        </div>\n\n        <div className=\"form-div\">\n          <input\n            onChange={this.handleChange}\n            type=\"password\"\n            placeholder=\"password\"\n            name=\"password\" \n            required/>\n        </div>\n        <div className=\"form-div\">\n          <input\n            onChange={this.handleChange}\n            type=\"password\"\n            placeholder=\"confirm password\"\n            name=\"password_confirmation\" \n            required/>\n        </div>\n\n        <div className=\"form-div\">\n          <textarea\n            rows=\"5\"\n            cols=\"30\"\n            onChange={this.handleChange}\n            placeholder=\"Bio\"\n            name=\"bio\" />\n        </div>\n\n        <div className=\"form-div\">\n          <ImageUpload\n            // labelText=\"Upload Image\"\n            handleChange={this.handleChange}\n            fieldName=\"image\"/>\n        </div>\n\n        <div className=\"button-div\">\n          <button\n            className=\"button\"\n            type=\"submit\" disabled={!this.state.formValid}>\n              Register</button>\n        </div>\n\n      </form>\n      </main>\n    </section>\n  )\n  }\n\n}\n\nexport default Register","import React from 'react'\nimport { Link } from 'react-router-dom'\n\n\nclass Nav extends React.Component {\n\n  render() {\n\n    return(\n      <nav className='nav'>\n        <Link to='/'>Home</Link>\n        <Link to='/clubs'>Clubs</Link>\n        <Link to='/login'>Login</Link>\n        <Link to='/register'>Register</Link>\n      </nav>\n  )\n  }\n\n}\n\nexport default Nav","import React from 'react'\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\nimport SecureRoute from './components/common/SecureRoute'\nimport './styles/main.scss'\n\nimport Home from './components/common/Home'\nimport ClubIndex from './components/clubs/ClubIndex'\nimport ClubShow from './components/clubs/ClubShow'\nimport ClubCreate from './components/clubs/ClubCreate'\nimport ClubEdit from './components/clubs/ClubEdit'\nimport BookEdit from './components/books/BookEdit'\nimport BookCreate from './components/books/BookCreate'\nimport BookShow from './components/books/BookShow'\nimport MemberIndex from './components/members/MemberIndex'\nimport Login from './components/auth/Login'\nimport Register from './components/auth/Register'\nimport Nav from './components/common/Nav'\n// import Footer from './components/common/Footer'\n\n\n\n\n\nclass App extends React.Component {\n\n  render(){\n    return(\n        <BrowserRouter>\n          <Nav/>\n          <Switch>\n          <Route exact path='/' component={Home}/>\n          <SecureRoute path='/clubs/:id/books/create' component={BookCreate}/>\n          <Route path='/clubs/:id/members' component={MemberIndex}/>\n          <SecureRoute path='/clubs/:id/edit' component={ClubEdit}/>\n          <SecureRoute path='/clubs/create' component={ClubCreate}/>\n          <Route path='/clubs/:id' component={ClubShow}/>\n          <Route path='/clubs' component={ClubIndex}/>\n          <SecureRoute path='/books/:id/edit' component={BookEdit}/>\n          <Route path='/books/:id' component={BookShow}/>\n          <Route path='/login' component={Login}/>\n          <Route path='/register' component={Register}/>\n          </Switch>\n          {/* <Footer/> */}\n        </BrowserRouter> \n    )\n  }\n\n\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}